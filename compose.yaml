services:
  database-backup:
    image: database-backup:latest
    profiles:
      - database-backup
    restart: unless-stopped
    environment:
      AWS_ACCESS_KEY_ID: ${S3_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${S3_SECRET_ACCESS_KEY}
      AWS_S3_ENDPOINT: ${S3_ENDPOINT}
      AWS_DEFAULT_REGION: ${S3_DEFAULT_REGION}
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${POSTGRES_DB_CAELUS}
      POSTGRES_HOST: ${POSTGRES_HOST}
      S3_BUCKET: ${S3_BUCKET}
  thatskyapplication-notifications:
    image: thatskyapplication-notifications:latest
    profiles:
      - thatskyapplication-notifications
    restart: unless-stopped
    environment:
      DISCORD_TOKEN: ${DISCORD_TOKEN}
      DATABASE_URL: ${DATABASE_URL_CAELUS}
      BETTER_STACK_TOKEN: ${BETTER_STACK_TOKEN_NOTIFICATIONS}
      BETTER_STACK_ENDPOINT_URL: ${BETTER_STACK_ENDPOINT_URL_NOTIFICATIONS}
  thatskyapplication-servare:
    image: thatskyapplication-servare:latest
    profiles:
      - thatskyapplication-servare
    restart: unless-stopped
    environment:
      DISCORD_TOKEN: ${DISCORD_TOKEN_SERVARE}
      APPLICATION_ID: ${APPLICATION_ID}
      DATABASE_URL: ${DATABASE_URL_SERVARE}
      BETTER_STACK_TOKEN: ${BETTER_STACK_TOKEN_SERVARE}
      BETTER_STACK_ENDPOINT_URL: ${BETTER_STACK_ENDPOINT_URL_SERVARE}
  thatskyapplication-socials:
    image: thatskyapplication-socials:latest
    profiles:
      - thatskyapplication-socials
    restart: unless-stopped
    environment:
      DATABASE_URL: ${DATABASE_URL_CAELUS}
      BETTER_STACK_TOKEN: ${BETTER_STACK_TOKEN_SOCIALS}
      BETTER_STACK_ENDPOINT_URL: ${BETTER_STACK_ENDPOINT_URL_SOCIALS}
      REDDIT_APPLICATION_ID: ${REDDIT_APPLICATION_ID}
      REDDIT_APPLICATION_SECRET: ${REDDIT_APPLICATION_SECRET}
  thatskyapplication-website:
    image: thatskyapplication-website:latest
    profiles:
      - thatskyapplication-website
    x-ports:
      - elizabeth-you-need-more-mexico.thatskyapplication.com:80/https
    restart: unless-stopped
    environment:
      SESSION_SECRET: ${SESSION_SECRET}
      DATABASE_URL: ${DATABASE_URL_CAELUS}
      DISCORD_TOKEN: ${DISCORD_TOKEN_CAELUS}
      APPLICATION_ID: ${APPLICATION_ID}
      DISCORD_CLIENT_SECRET: ${DISCORD_CLIENT_SECRET}
      SUPPORT_SERVER_GUILD_ID: ${SUPPORT_SERVER_GUILD_ID}
      TRANSLATOR_ROLE_ID: ${TRANSLATOR_ROLE_ID}
      CROWDIN_CLIENT_ID: ${CROWDIN_CLIENT_ID}
      CROWDIN_CLIENT_SECRET: ${CROWDIN_CLIENT_SECRET}
      REDIRECT_URI_LOGIN: ${REDIRECT_URI_LOGIN}
      REDIRECT_URI_DISCORD_CROWDIN: ${REDIRECT_URI_DISCORD_CROWDIN}
      BETTER_STACK_TOKEN: ${BETTER_STACK_TOKEN_WEBSITE}
      BETTER_STACK_ENDPOINT_URL: ${BETTER_STACK_ENDPOINT_URL_WEBSITE}
